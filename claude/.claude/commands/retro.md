---
description: タスク完了後の振り返りを行い、Claude Code設定全体（CLAUDE.md/コマンド/Skills/MCP）の改善提案を生成する
---

# 振り返り（Retrospective）

タスク完了後の振り返りを実施し、Claude Code 設定全体の改善ループを回します。

## 実行手順

### 1. 今回の作業を振り返る

以下の観点で振り返りを行ってください：

- **良かった点**: 効率的だったこと、うまくいったこと、スムーズに進んだ部分
- **改善点**: 無駄だったこと、手戻りの原因、時間がかかりすぎた部分
- **学び**: 新しく分かったこと、次に活かせること、発見したパターン

---

### 2. 改善提案の検討

以下の4つの観点で改善提案を検討してください。

#### 2-1. CLAUDE.md

| スコープ | 配置場所 | 用途 |
|----------|----------|------|
| ユーザー固有 | `~/.claude/CLAUDE.md` | 全プロジェクト共通のルール・ワークフロー |
| プロジェクト固有 | `<project>/.claude/CLAUDE.md` or `<project>/CLAUDE.md` | そのプロジェクト特有のルール・制約 |

**検討項目:**
- 追加すべきルール
- 修正すべきルール
- 削除すべきルール
- **スコープの見直し**: ユーザー固有 ↔ プロジェクト固有 の移動が必要なものはないか

#### 2-2. カスタムスラッシュコマンド

| スコープ | 配置場所 | 用途 |
|----------|----------|------|
| ユーザー固有 | `~/.claude/commands/` | 全プロジェクトで使う汎用コマンド |
| プロジェクト固有 | `<project>/.claude/commands/` | そのプロジェクト特有のコマンド |

**検討項目:**
- **新規追加**: 繰り返し行った作業をコマンド化すべきか
- **改善**: 既存コマンドの手順・説明に不足はないか
- **削除**: 使わなくなったコマンドはないか
- **スコープの見直し**: ユーザー固有 ↔ プロジェクト固有 の移動が必要なものはないか

#### 2-3. Skills

**検討項目:**
- **新規追加**: 特定の作業パターンをSkill化すべきか（例: 特定フレームワークの実装パターン）
- **改善**: 既存Skillの精度・出力品質に問題はないか
- **削除**: 使わなくなった、または効果が薄いSkillはないか

#### 2-4. MCP（Model Context Protocol）

**検討項目:**
- **新規追加**: 接続すべき外部ツール・サービスはないか（例: 新しく使い始めたツール）
- **改善**: 既存MCP接続の使い勝手に問題はないか
- **今回使わなかったMCP**: 参考情報として出力（※削除判断は別途行う）

> **Note**: MCPは「今回使わなかった＝不要」ではありません。タスクの種類によって使うMCPは異なるため、削除は慎重に判断してください。

---

### 3. 提案を人に確認

改善提案がある場合は、以下の形式で提示してください：

```markdown
## Claude Code 改善提案

### CLAUDE.md

#### 追加
- [追加するルールの内容]
  - スコープ: ユーザー固有 / プロジェクト固有
  - 理由: [なぜ追加するか]

#### 修正
- [修正前] → [修正後]
  - スコープ: ユーザー固有 / プロジェクト固有
  - 理由: [なぜ修正するか]

#### 削除
- [削除するルール]
  - 理由: [なぜ削除するか]

#### スコープ変更
- [ルール内容]
  - 変更: ユーザー固有 → プロジェクト固有 / プロジェクト固有 → ユーザー固有
  - 理由: [なぜ移動するか]

---

### カスタムスラッシュコマンド

#### 新規追加
- コマンド名: `/[name]`
  - スコープ: ユーザー固有 / プロジェクト固有
  - 用途: [何をするコマンドか]
  - 理由: [なぜ必要か]

#### 改善
- コマンド名: `/[name]`
  - 改善内容: [どう改善するか]
  - 理由: [なぜ改善が必要か]

#### 削除
- コマンド名: `/[name]`
  - 理由: [なぜ削除するか]

---

### Skills

#### 新規追加
- Skill名: [name]
  - 用途: [何をするSkillか]
  - 理由: [なぜ必要か]

#### 改善
- Skill名: [name]
  - 改善内容: [どう改善するか]

#### 削除
- Skill名: [name]
  - 理由: [なぜ削除するか]

---

### MCP

#### 新規追加
- 接続先: [ツール/サービス名]
  - 用途: [何のために接続するか]
  - 理由: [なぜ必要か]

#### 改善
- 接続先: [ツール/サービス名]
  - 改善内容: [どう改善するか]

#### 今回使わなかったMCP
- 接続先: [ツール/サービス名]
  - 理由: [今回のタスクでは不要だった理由]
  - 想定用途: [どんなタスクで使うか]
```

提案後、「以下の改善を提案します。反映しますか？」と確認してください。

---

## スコープ判断の指針

「ユーザー固有」と「プロジェクト固有」で迷った場合の判断基準：

| 判断基準 | ユーザー固有 | プロジェクト固有 |
|----------|-------------|-----------------|
| 他のプロジェクトでも使うか？ | はい | いいえ |
| チームメンバーと共有すべきか？ | いいえ | はい |
| 個人の作業スタイルに依存するか？ | はい | いいえ |
| プロジェクトの技術スタック固有か？ | いいえ | はい |

---

## 注意事項

- 振り返りは正直に行う（うまくいかなかった点も隠さない）
- 改善提案は具体的に（抽象的な提案は避ける）
- 小さな改善でも積み重ねることが重要
- 提案がない項目は「特になし」で省略してOK
